# zKillboard 2025 Year in Review

A comprehensive overview of development activities, new features, bug fixes, and improvements made to zKillboard throughout 2025.

---

## Major Infrastructure & Library Updates

### Framework Modernization
- **Slim 4 Upgrade** (November) - Complete migration from Slim 2.6.3 to Slim 4, modernizing the routing and middleware architecture
- **Twig 3.0 Upgrade** (October) - Updated template engine for better performance and modern syntax
- **MongoDB Library Update** (November) - Massive update to MongoDB drivers, improving database interaction and compatibility
- **Composer Updates** - Regular dependency updates throughout the year maintaining security and compatibility

### Session & State Management
- **Redis Sentinel Implementation** (May-June) - Improved Redis high availability and automatic failover
- **Session Persistence** (May) - Sessions now persist across multiple servers using MongoDB-backed session handlers
- **Key-Value Cache System** (June) - New KVCache using Redis and MongoDB for hybrid caching

---

## New Features & Major Additions

### Faction Warfare Integration (ongoing)
- **FW Label System** (December) - Added faction warfare labels with backfill support for historical data
- **FW Location Tracking** - Integration of faction warfare zones and activity

### Streambox (August-September)
- **OBS Integration** - New streambox feature for livestreamers to display kills in OBS
- **Customizable Layout** - Configurable number of kills, horizontal/vertical layouts via pure CSS
- **CSS Customization** - Full documentation for custom styling kill displays in OBS
- **Free Service** - Explicitly indicated as a free service for the community
- **Update Frequency** - Configurable update intervals for stream overlays

### Advanced Search Enhancements
- **Export Functionality** (September) - Ability to export stats from advanced search results
- **Label Integration** (August) - Labels now searchable in advanced search
- **Labeled Buttons** (August) - Improved UI with clearly labeled filter buttons
- **Visual Improvements** (August-September) - Multiple UI refinements for better usability
- **URL Sharing** (August) - Save and share advanced search URLs
- **Solo Filtering** (August-September) - Enhanced solo kill filtering and labeling
- **Distincts** (August) - Added distinct value counting
- **Abbreviated Values** (August) - Show abbreviated values with full values on hover

### Scanalyzer
- **Ship Inspiration** (July) - Generate fits based on all ships killed/lost (excluding pods) _(note: I have no idea what the AI is talking about here!)_
- **Login Protection** (July) - Added login requirement to protect from abuse (temporary measure)

### Location & Map Features
- **Location Images** (August) - Added 256x256 and 32x32 renders for solar systems, constellations, and regions (thanks @Nohus)
- **Triglavian Font** (December) - Constellation names now use Triglavian font styling
- **Multiple Location Search** (November) - Allow searching multiple locations simultaneously
- **Future Date Filters** (November) - Support for future date filtering
- **Pochven Support** (August) - Added Pochven region to location tracking
- **Map Activity Updates** (May-August) - Improved activity heatmap readability and performance

### Battle Reports
- **RIFT Integration** (August) - Added RIFT icon/link to battle reports
- **Warbeacon.net** (October) - Added as alternative battle report viewing option
- **br.evetools.org** (December) - Restored after temporary removal
- **Real World Prices** (March) - ISK Lost and Loot Dropped now show USD/EUR/GBP values

### Killmail Value & Pricing
- **Loot Dropped vs Destroyed** (January-August) - Separate display for dropped loot vs destroyed items
- **Checkbox/X Interface** (August) - Visual interface to toggle dropped/destroyed items
- **Destroyed Value Sans Ship** (January) - New value showing loot destroyed excluding the ship itself
- **Price Check Integration** (August) - Easy way to price check any item
- **Real World Price Display** (March-September) - USD/EUR/GBP conversions throughout the site _(note: these have been here for years but received some tweaks this year)_
- **Value Filter Fix** (October) - Fixed rawurldecode issue in value filtering

### Item & Ship Display
- **Ship Badges** (August) - Ship images now include faction/class badges
- **Blueprint Display** (September) - Blueprints now show properly in search results
- **Published Items Only** (September) - Search now filters to published items only
- **Legacy Item Sorting** (August) - Legacy items appear last in search results
- **Categories** (April) - Added various item categories for better organization

### Favorites & Tracking
- **Favorites Page** (November) - Improved favorites page with better layout and organization
- **Favorites Relocation** (August) - Moved favorites to more accessible location

### Character & Corporation Features
- **Podmail Integration** (October-November) - Include link to PodMail on character overview pages
- **Bulk Name Updater** (August) - Efficiently update character/corporation/alliance names
- **Name Update Frequency** (August-September) - Dynamic update frequency based on activity
- **Obscene Name Handling** (October) - Better handling of ESI obscene name flags
- **Security Status** (January-February) - Improved sec status reporting for idle characters
- **Character Affiliation** (November) - Rely on ESI affiliation rather than cron jobs

### Disqualification System (February-March)
- **DQ Tracking** - Track disqualified killmails with information about who is responsible
- **DQ Cron Job** - Automated checks for disqualification criteria
- **Efficient Lookups** (November) - Optimized disqualification checking

### External Service Integration
- **JitaRun** (September) - Added as replacement for HSBB
- **EVE Sales** (September) - More prominent placement for EVE Sales links
- **eveconomy** (October) - Added eveconomy link with local images
- **EveWho** (January) - Updated to use character IDs instead of names
- **Map Enhancement** (August) - Improved map integrations

---

## Performance Optimizations

### Ranking System
- **Experimental MongoDB Ranking** (November) - Attempted migration from Redis to MongoDB (later reverted)
- **Redis Ranking Restoration** (November) - Restored Redis-based ranking system after MongoDB experiment
- **Rank Consistency** (December) - Ensured consistent rank reporting across all code
- **Predictable Scheduling** (November) - Ranks now calculated on a predictable schedule
- **Rank Starting Point** (December) - Corrected ranks to start at 1 instead of 0

### Database Optimizations
- **Index Additions** (Throughout year) - Multiple index additions for improved query performance
- **Constellation Weekly Index** (November) - Added constellation to weekly statistics
- **Removed Unused Indexes** (November) - Cleaned up unused database indexes
- **Efficient DQ Lookup** (November) - More efficient disqualification queries
- **Faster Name Lookup** (November) - Optimized name resolution queries

### Caching & TTL
- **Analytics Migration** (November) - Moved analytics from Redis TTL counters to database
- **Cache Time Adjustments** (November) - Optimized cache expiration times for various components
- **Price Cache Updates** (November) - Adjusted price cache expiration
- **Edge Cache Extensions** (June) - Extended edge cache times for better CDN performance
- **Kill List Row Caching** (June) - Put killistrows on longer cache

### Cron Job Improvements
- **Character Update Frequency** (September) - Dynamic frequency based on activity
- **Corporation Call Reduction** (September) - Reduced ESI calls based on activity
- **Name Check Frequency** (September) - 4x per minute name checking
- **Pad Finder** (June) - Pad checks now every 5 days instead of more frequently
- **Multi-threading** (October) - Protection against too many long-running threads
- **Thread Limits** (August) - Configurable max corporation ESI threads

### ESI Integration
- **ESI Versioning Removal** (October) - Removed versioning from ESI endpoints for better stability
- **ESI Offline Detection** (March) - Better discernment between ESI offline vs ESI errors
- **ESI Slow Notifications** (May) - Notifications when ESI is running slow
- **Time-Aware Messages** (May) - ESI offline messages now time-aware
- **Downtime Messages** (September) - Adjusted downtime message display
- **Invalid Token Handling** (September) - Proper handling of invalid ESI tokens

---

## User Interface Improvements

### Visual & UX
- **Tippy Tooltips** (November) - Replaced old tooltip system with Tippy.js (resolved memory leaks)
- **White Flash Fix** (November) - Prevented white flash on page load
- **Page Jump Prevention** (November) - Fixed page jumping issues
- **Activity Heatmap** (November) - Improved readability with adjusted brightness
- **Consistent Widths** (April) - More consistent badge and element widths
- **Markee Banner** (May) - Live updating messages and banner for adblockers
- **No Referrer** (July) - Removed noreferrer from links
- **Dropdown Fixes** (July) - Corrected dropdown issues that mysteriously stopped working
- **Focus Improvements** (October) - Better focus management
- **Pencil Icon** (October) - More obvious manual entry indicators

### Date & Time
- **Local DateTime Picker** (October) - Uses local datetime picker for better UX
- **Clock Updates** (December) - Updated time display formatting
- **Trigger on Input Change** (October) - Proper triggering on date input changes

### Background Images
- **Odysseus** (November) - New Odysseus expansion background
- **Catalyst** (November) - New Catalyst background image
- **Background Stretching** (November) - Proper alignment and stretch of background images
- **Equinox** (May) - Updated background for Equinox expansion
- **ESI SVG** (May) - Added ESI SVG graphics
- **Fallback Images** (October) - Fallback to sun image when system image unavailable

### Tables & Data Display
- **DataTables Protection** (November) - Don't let DataTables failure break the site
- **Load Counter** (July) - Brought back the load counter
- **Sort Options** (October) - Made sort options more obvious
- **Points Sorting** (October) - Added points to sorting options
- **Percentages Display** (October) - Better percentage displays
- **Totals Display** (June) - Show totals again in search results
- **Page Size** (September) - Configurable dataset sizes with illusion of speed

### Buttons & Navigation
- **Sponsor/Star Buttons** (October) - Made sponsor and star buttons more obvious
- **Save Fit Button** (May) - Made save fit more obvious, relocated some links
- **Custom Titles** (October) - Custom titles for information pages
- **Trailing Slash** (October) - Added trailing slashes to various routes for consistency

---

## Bug Fixes & Corrections

### Critical Fixes
- **Subsystem Hold Import** (April) - Fixed ESI import issue when subsystem hold has items
- **Negative Value Display** (April) - Fixed negative values showing on large integers
- **Destroyed Price** (March) - Fixed missing USD/EUR/GBP in destroyed value
- **Related Reports Loading** (February) - Fixed related reports failing to load properly
- **Sec Status Display** (February) - Fixed lack of security status display
- **Distance Calculations** (February) - Proper calculation of distances from celestial warp-ins and gate/station edges (thanks @Nohus)
- **Session Issues** (June) - Fixed various login/session issues
- **Blueprint Errors** (September) - Error handling for blueprints
- **XSS Prevention** (January) - Prevented cross-site scripting vulnerabilities

### Data Accuracy
- **Recent Values** (August) - Fixed recent values being high compared to alltime
- **Dropped/Destroyed Logic** (August-September) - Consistent filtering for dropped vs destroyed
- **Solo Label Logging** (August) - Consistent solo kill labeling
- **Points Calculation** (January) - Corrected "points don't matter" calculation
- **Sec Class Fix** (January) - Fixed security class reporting
- **Heat Damage** (September) - Corrected dogma returning 0 value on heat damage
- **NPC Filtering** (September) - Consider only non-NPCs in certain calculations
- **Damage Taken Field** (February) - Corrected damage taken field calculation

### Route & URL Fixes
- **Route Changes** (June) - Fixed route change issues (#327)
- **Autocomplete Endpoint** (June) - Moved autocomplete route endpoint
- **In-Game Link Route** (August) - Added in-game link route
- **Redirect Logic** (September) - Proper redirect to URI handling
- **Tag Links** (January) - Fixed tag links
- **URI Conversion** (September) - Better URI parameter conversion

### Item & Flag Handling (Saving fits)
- **Invalid Flags** (April-October) - Filter out invalid item flags
- **Bay Handling** (October) - Ignore more bays that CCP doesn't save properly
- **Flag Exclusions** (April) - More flags to exclude from processing
- **NPC Corporation Handling** (October) - Don't be noisy with NPC corporations

### ESI & External Services
- **ESI Import Issues** (Throughout year) - Various ESI import fixes
- **Implant Slots** (November) - Get implant slot data from ESI
- **Affiliation Updates** (November) - Better character affiliation handling
- **Universe Loading** (March-September) - Don't execute certain operations if universe not loaded
- **Delayed Killmails** (July-August) - Beta implementation of delayed killmail handling
- **RedisQ Performance** (April-May) - Busy killmails send slower to protect RedisQ server

---

## Code Quality & Maintenance

### Cleanup
- **Unused Code Removal** (Throughout year) - Multiple instances of removing unused functions and files
- **Test Files** (December) - Removal of test files
- **Debug Messages** (Throughout year) - Removed various debug and log messages
- **Obsolete Features** (October) - Removed obsolete pageTimer/queryCount
- **Old References** (November) - Removed old Log:: references
- **killstream Removal** (May) - Removed killstream, use RedisQ instead
- **Twitch References** (November) - Removed Twitch references
- **RTQ Removal** (June) - Removal of RTQ (real-time queue)
- **Sitemap Deprecation** (April) - Sitemaps marked as deprecated

### Error Handling
- **404/405 Suppression** (November) - Suppress 404 and 405 errors in logs to reduce noise
- **PHP Warning Logging** (August) - Log PHP warnings and errors to database
- **Error Case Handling** (August) - Better error case on fuzz fail
- **Problem Package Removal** (August) - Remove problem packages after 20 attempts
- **Local Dev Errors** (October) - No errors when in local dev environment
- **Better Error Messages** (November) - Less verbose bug messages, more informative logging

### Documentation
- **Features.md** (Throughout year) - Regular updates to feature documentation
- **zKillBot Documentation** (October) - Complete documentation for zKillBot commands
- **Vibed Documentation** (October-November) - Improved Vibed presentation and clarity
- **FAQ Updates** (September) - Updated FAQ content
- **About Page** (July) - Updated About page content
- **README Updates** (June) - Various README improvements
- **Streambox Documentation** (August-October) - Complete streambox setup documentation

### Development Environment
- **Local Dev Setup** (October) - Better setup for local development
- **Standalone Environment** (September) - Handle standalone environment
- **Localhost WebSocket** (September) - Allow for localhost WebSocket connections
- **.vscode Ignore** (September) - Ignore .vscode directory
- **npm Setup** (August) - Added npm package.json and .gitignore

### Logging & Monitoring
- **User Login Logging** (October) - Log to user's log when they login
- **Patreon Logging** (March) - Log Patreon interactions
- **Request Time Stats** (February) - Added request time statistics
- **Cronlog Streaming** (June) - Watch cronlog stream
- **Log Message Size** (January) - Reduced log message size
- **Better Output** (August) - Improved cron output formatting

---

## Community Contributions & Pull Requests

### Merged Pull Requests
- **#340** - Fix value filter (rawurldecode) by @Nimos
- **#338** - Update warbeacon link to use relatedTime variable by @garveen
- **#336** - Test improvements by @salartarium
- **#334** - Added 32x32 renders for locations by @Nohus
- **#333** - Added location renders by @Nohus
- **#323** - Add real world prices to related reports by @nicti
- **#322** - Fix destroyed price by @nicti
- **#318** - Update Dagon price to 60B ISK by @bearthatcares
- **#317** - EveWho integration improvements by @Dusty-Meg
- **#316** - EveWho uses character IDs by @Dusty-Meg
- **#315** - ISK dropped renamed to Loot dropped by @nicti
- **#314** - Fix sec class by @nicti

### Bug Reports Addressed
- **#341** - Fixed (December)
- **#339** - Value filter fix (October)
- **#335** - Addressed (August)
- **#332** - Fixes (August)
- **#327** - Route change updates fixed (June)
- **#324** - Fixed (March)
- **#306** - Experimental ranking system (November, later reverted)

---

## Third-Party Service Changes

### Service Removals
- **HSBB** (September) - Removed (RIP), replaced with JitaRun
- **Awesome EVE** (July) - Removed (archived)
- **evetools** (December) - Temporarily removed, then restored when service continued

### Service Additions
- **logos.zzeve.com** (July) - Added as resource
- **JitaRun** (September) - Added for HSBB replacement
- **eveconomy** (October) - Added link with local images
- **Warbeacon.net** (October) - Added as alternative battle report tool
- **RIFT** (August) - Added RIFT integration for intel tool

### Service Updates
- **Podmail** (October-November) - Updated podmail domain and links
- **EveWho** (January) - Updated to use character IDs
- **Patreon** (October) - Auto-updating Patreon integration, ignore Patreon dates and buffer based on current/paid status
- **EVE Ship Fit** - Maintained integration
- **EVE Workbench** - Maintained integration

---

## API & Developer Features

### API Endpoints
- **Killmail Add API** (January) - Beta API for adding killmails with success/failure responses
- **Bucket Rate Limits** (November) - Implementation of new bucket rate limits for killmails endpoint
- **Stats API Protection** (April) - Throw error for stats requests with no info
- **Health Checks** (June) - Added health check endpoints
- **NoAPI Handling** (August) - Stop at noapi flag

### RedisQ
- **RedisQ URL Update** (May) - Updated RedisQ URL
- **RedisQ Integration** (Throughout year) - Moved from killstream to RedisQ
- **RedisQ Performance** (April-September) - Various performance optimizations
- **RedisQ Delay Configuration** (August) - Configurable delay for RedisQ performance
- **Ganks through RedisQ** (August) - Push ganks back through RedisQ
- **Quick Repopulator** (October) - Script to repopulate recent RedisQ entries

### WebSocket
- **WebSocket Count** (May) - New WebSocket count method
- **Live Updates** (Throughout year) - Enhanced live update functionality
- **Message Updates** (May) - Live update on messages

---

## Configuration & Settings

### User Settings
- **Tracker Notification** (January) - Respect tracker notification setting
- **Checkbox Preferences** (August) - Site remembers user's checkbox preferences
- **Login Requirements** (July) - Proper method of requiring logged-in users (antipattern removed)

### Site Configuration
- **Config Channel** (October) - Added config-channel command for zKillBot
- **Restricted Commands** (October) - /leave marked as restricted command
- **Master Lock** (May) - Master server designation improvements
- **Referrer Check** (November) - Removed referrer check for sponsorship
- **Storage Check** (June) - Simple storage check implementation

### Protection & Security
- **Scraper Protection** (August) - Site protection from scrapers
- **Bot Protection** (April) - Tell bots to stop hitting login endpoints
- **Load Protection** (August) - Don't execute when loads are high
- **Rate Limiting** (Various) - Various rate limiting implementations

---

## Statistics & Calculation Updates

### Stats Improvements
- **calcAlltime** (January) - More efficient calculations, ignore labels
- **Recent Stats** (Throughout year) - Various improvements to 90-day statistics
- **Weekly Stats** (Throughout year) - Various improvements to 7-day statistics
- **Sequence Usage** (October) - Use sequence in various calculations
- **Stats Pending** (October) - Bake reset skip into query, run even on large stats pending
- **Stats Stop Method** (August) - Pause stats first before operations

### Points System
- **Points Recalc** (October) - Points recalculation script
- **Fitted/Dropped/Destroyed** (October) - Add fitted/dropped/destroyed values
- **Points Sorting** (October) - Sort by points in various displays

### Value Calculations
- **Bulk Implementation** (October) - Bulk value calculation improvements
- **Ship+Fit Percentage** (October) - Clarified ship and fit percentage descriptions
- **Top Query** (June) - Ensure top query only pulls PVP killmails
- **Top Calculation** (April) - Reduce max killmails to wait for top recalc to 1001

---

## Labels & Categories

### Label System
- **Label Categorization** (August) - Organized labels into categories
- **Label Override** (July) - Ability to override labels on killmails
- **loc:drifters** (April) - Added new drifters location label
- **Drifters from W-Space** (April) - Removed drifters from w-space, separate label
- **Ganked Labels** (September) - Full gank checking, don't add to RedisQ
- **Salty Label** (January) - Added 'salty' label

### Gang/Solo Tracking
- **Solo Kill Tracking** (Throughout year) - Enhanced solo kill detection and display
- **Final Blow** (September) - Solo should show final blow too
- **Gang Factor** (Throughout year) - Various gang factor calculation improvements
- **Danger Ratio** (Throughout year) - Danger ratio calculations for various time periods

---

## Infrastructure & Deployment

### Server Management
- **Primary Server Flag** (June) - Include whether this is the primary server
- **Server Sorting** (June) - Sort servers properly
- **Health Checks** (June) - Various health check implementations
- **ztop** (June) - Changes to ztop display and calculation

### Schema & Data
- **Schema Updates** (August) - Updated database schemas
- **Items Dump** (August) - Updated items dump
- **Backlog Update** (August) - Backlog processing updates
- **SDE Format** (November) - Updated to new SDE format, removed remote SDE dependency

### Scratch & Development
- **Scratch Rankings** (August) - Scratch code for rankings
- **Scratch Period Stats** (August) - Scratch code for period statistics  
- **Scratch Watch** (August) - Scratch code to watch inserts

---

## Special Events & Seasonal

### Expansion Support
- **Odysseus** (November) - Background and assets for Odysseus expansion
- **Equinox** (May) - Background and assets for Equinox expansion

### Seasonal Content
- **April Fools** (Ongoing) - Everyone is snuggly on April 1st (danger ratio = 0)
- **Extra Life Banner** (November) - Added Extra Life charity banner
- **Birthday Badge** (May) - Don't remove birthday badges

### Trophy & Achievement Updates
- **Babaroga** (November) - Adjusted to 10B only before 2025-06-01
- **Dagon Price** (February) - Updated to 60B ISK
- **Trophy Updates** (Throughout year) - Various trophy calculation improvements

---

## Notable Experimental Features

### Attempted (Later Reverted)
- **MongoDB Ranking System** (November) - Experimental migration from Redis to MongoDB for rankings, proved unsuccessful and was fully reverted while maintaining all optimizations learned

### Beta Features
- **Delayed Killmails** (July-August) - Beta implementation for handling delayed killmail processing
- **Structures as Ships** (November) - Structures now properly report as "ship" for overview purposes

---

## Metrics & Acknowledgments

### Contributors
Special thanks to:
- @Nohus - Location renders, distance calculations, various bug reports
- @nicti - Price improvements, various fixes
- @Dusty-Meg - EveWho integration
- @bearthatcares - Trophy value updates
- @garveen - Warbeacon fixes
- @Nimos - Value filter fixes
- @salartarium - Test improvements
- @dobruypk - Forked and fixed old style map

### Statistics
- **500+ commits** in 2025
- **15+ merged pull requests** from community
- **10+ issue fixes** from bug reports
- **Major library updates** (Slim 4, Twig 3, MongoDB drivers)
- **Multiple external service integrations** added/updated
- **Extensive performance optimizations** across the platform

---

## Looking Forward

The year 2025 saw extensive modernization of zKillboard's infrastructure, significant performance improvements, and numerous community-requested features. The focus remained on reliability, performance, and user experience while maintaining the site's core functionality as EVE Online's premier killmail tracker.

Key themes for 2025 were:
- Infrastructure modernization (Slim 4, Twig 3, MongoDB updates)
- Performance optimization (caching, indexing, query optimization)
- Community contributions and feedback integration
- Third-party tool integration and ecosystem growth
- Enhanced user experience and visual improvements

---

*This recap covers commits from January 1, 2025 through December 9, 2025.*

*Generated from Git commit history - zKillboard/zKillboard repository*
