<?php
require_once "../init.php";

$db = $mdb->getDb();

// activity
echo "\nCreating collection activity ... ";
$db->createCollection("activity");
$collection = "activity";
$activity = $db->$collection;
echo "Done\n";
echo "Creating index : 'id' => 1, 'day' => 1, 'hour' => 1, 'killID' => 1 ... ";
$activity->ensureIndex(['id' => 1, 'day' => 1, 'hour' => 1, 'killID' => 1], ['unique' => true]);
echo "Done\n";
echo "Creating index : 'id' => 1, 'day' => 1, 'hour' => 1 ... ";
$activity->ensureIndex(['id' => 1, 'day' => 1, 'hour' => 1], []);
echo "Done\n";
echo "Creating index : 'dttm' => 1 ... ";
$activity->ensureIndex(['dttm' => 1], ['expireAfterSeconds' => 7776000]);
echo "Done\n";
echo "Creating index : 'id' => 1 ... ";
$activity->ensureIndex(['id' => 1], []);
echo "Done\n";

// battles
echo "\nCreating collection battles ... ";
$db->createCollection("battles");
$collection = "battles";
$battles = $db->$collection;
echo "Done\n";
echo "Creating index : 'battleID' => 1 ... ";
$battles->ensureIndex(['battleID' => 1], ['unique' => true]);
echo "Done\n";
echo "Creating index : 'solarSystemID' => 1, 'dttm' => 1, 'options' => 1 ... ";
$battles->ensureIndex(['solarSystemID' => 1, 'dttm' => 1, 'options' => 1], []);
echo "Done\n";

// celestials
echo "\nCreating collection celestials ... ";
$db->createCollection("celestials");
$collection = "celestials";
$celestials = $db->$collection;
echo "Done\n";
echo "Creating index : 'CelestialID' => 1 ... ";
$celestials->ensureIndex(['CelestialID' => 1], []);
echo "Done\n";

// comments
echo "\nCreating collection comments ... ";
$db->createCollection("comments");
$collection = "comments";
$comments = $db->$collection;
echo "Done\n";
echo "Creating index : 'pageID' => 1 ... ";
$comments->ensureIndex(['pageID' => 1], []);
echo "Done\n";
echo "Creating index : 'upvotes' => 1 ... ";
$comments->ensureIndex(['upvotes' => 1], []);
echo "Done\n";
echo "Creating index : 'commentID' => 1 ... ";
$comments->ensureIndex(['commentID' => 1], []);
echo "Done\n";

// crestmails
echo "\nCreating collection crestmails ... ";
$db->createCollection("crestmails");
$collection = "crestmails";
$crestmails = $db->$collection;
echo "Done\n";
echo "Creating index : 'processed' => 1 ... ";
$crestmails->ensureIndex(['processed' => 1], []);
echo "Done\n";
echo "Creating index : 'code' => 1 ... ";
$crestmails->ensureIndex(['code' => 1], ['sparse' => true]);
echo "Done\n";
echo "Creating index : 'killID' => 1 ... ";
$crestmails->ensureIndex(['killID' => 1], []);
echo "Done\n";
echo "Creating index : 'killID' => 1, 'hash' => 1 ... ";
$crestmails->ensureIndex(['killID' => 1, 'hash' => 1], ['unique' => true]);
echo "Done\n";
echo "Creating index : 'delay' => 1 ... ";
$crestmails->ensureIndex(['delay' => 1], ['partialFilterExpression' => array (
  'delay' => 
  array (
    '$gt' => 0,
  ),
)]);
echo "Done\n";

// cronlog
echo "\nCreating collection cronlog ... ";
$db->createCollection("cronlog");
$collection = "cronlog";
$cronlog = $db->$collection;
echo "Done\n";
echo "Creating index : 'epoch' => 1 ... ";
$cronlog->ensureIndex(['epoch' => 1], ['expireAfterSeconds' => 604800]);
echo "Done\n";
echo "Creating index : 'source' => 1 ... ";
$cronlog->ensureIndex(['source' => 1], []);
echo "Done\n";
echo "Creating index : 'server' => 1 ... ";
$cronlog->ensureIndex(['server' => 1], []);
echo "Done\n";

// daydump
echo "\nCreating collection daydump ... ";
$db->createCollection("daydump");
$collection = "daydump";
$daydump = $db->$collection;
echo "Done\n";
echo "Creating index : 'day' => 1 ... ";
$daydump->ensureIndex(['day' => 1], []);
echo "Done\n";

// esimails
echo "\nCreating collection esimails ... ";
$db->createCollection("esimails");
$collection = "esimails";
$esimails = $db->$collection;
echo "Done\n";
echo "Creating index : 'killmail_id' => 1 ... ";
$esimails->ensureIndex(['killmail_id' => 1], ['unique' => true]);
echo "Done\n";

// evemails
echo "\nCreating collection evemails ... ";
$db->createCollection("evemails");
$collection = "evemails";
$evemails = $db->$collection;
echo "Done\n";
echo "Creating index : 'sent' => 1 ... ";
$evemails->ensureIndex(['sent' => 1], []);
echo "Done\n";

// favorites
echo "\nCreating collection favorites ... ";
$db->createCollection("favorites");
$collection = "favorites";
$favorites = $db->$collection;
echo "Done\n";
echo "Creating index : 'characterID' => 1, 'killID' => 1 ... ";
$favorites->ensureIndex(['characterID' => 1, 'killID' => 1], ['unique' => true]);
echo "Done\n";

// funcs
echo "\nCreating collection funcs ... ";
$db->createCollection("funcs");
$collection = "funcs";
$funcs = $db->$collection;
echo "Done\n";

// geography
echo "\nCreating collection geography ... ";
$db->createCollection("geography");
$collection = "geography";
$geography = $db->$collection;
echo "Done\n";
echo "Creating index : 'type' => 1, 'id' => 1, 'serverVersion' => 1 ... ";
$geography->ensureIndex(['type' => 1, 'id' => 1, 'serverVersion' => 1], []);
echo "Done\n";
echo "Creating index : 'serverVersion' => 1 ... ";
$geography->ensureIndex(['serverVersion' => 1], []);
echo "Done\n";
echo "Creating index : 'id' => 1 ... ";
$geography->ensureIndex(['id' => 1], []);
echo "Done\n";

// information
echo "\nCreating collection information ... ";
$db->createCollection("information");
$collection = "information";
$information = $db->$collection;
echo "Done\n";
echo "Creating index : 'type' => 1, 'timeStarted' => 1 ... ";
$information->ensureIndex(['type' => 1, 'timeStarted' => 1], ['sparse' => true]);
echo "Done\n";
echo "Creating index : 'regionID' => 1 ... ";
$information->ensureIndex(['regionID' => 1], ['sparse' => true]);
echo "Done\n";
echo "Creating index : 'type' => 1, 'finished' => 1 ... ";
$information->ensureIndex(['type' => 1, 'finished' => 1], ['sparse' => true]);
echo "Done\n";
echo "Creating index : 'lastApiUpdate' => 1 ... ";
$information->ensureIndex(['lastApiUpdate' => 1], []);
echo "Done\n";
echo "Creating index : 'serverVersion' => 1 ... ";
$information->ensureIndex(['serverVersion' => 1], []);
echo "Done\n";
echo "Creating index : 'type' => 1, 'timeFinished' => -1 ... ";
$information->ensureIndex(['type' => 1, 'timeFinished' => -1], ['sparse' => true]);
echo "Done\n";
echo "Creating index : 'id' => 1 ... ";
$information->ensureIndex(['id' => 1], []);
echo "Done\n";
echo "Creating index : 'warID' => 1, 'started' => -1 ... ";
$information->ensureIndex(['warID' => 1, 'started' => -1], ['sparse' => true]);
echo "Done\n";
echo "Creating index : 'type' => 1, 'id' => 1 ... ";
$information->ensureIndex(['type' => 1, 'id' => 1], ['unique' => true]);
echo "Done\n";
echo "Creating index : 'name' => 1, 'type' => 1 ... ";
$information->ensureIndex(['name' => 1, 'type' => 1], []);
echo "Done\n";
echo "Creating index : 'type' => 1, 'timeStarted' => -1 ... ";
$information->ensureIndex(['type' => 1, 'timeStarted' => -1], ['sparse' => true]);
echo "Done\n";
echo "Creating index : 'war_eligible' => 1, 'memberCount' => -1 ... ";
$information->ensureIndex(['war_eligible' => 1, 'memberCount' => -1], ['sparse' => true]);
echo "Done\n";
echo "Creating index : 'type' => 1, 'finished' => 1, 'aggressor.alliance_id' => 1, 'defender.alliance_id' => 1 ... ";
$information->ensureIndex(['type' => 1, 'finished' => 1, 'aggressor.alliance_id' => 1, 'defender.alliance_id' => 1], []);
echo "Done\n";
echo "Creating index : 'groupID' => 1 ... ";
$information->ensureIndex(['groupID' => 1], ['sparse' => true]);
echo "Done\n";
echo "Creating index : 'type' => 1, 'finished' => 1, 'aggressor.corporation_id' => 1, 'defender.corporation_id' => 1 ... ";
$information->ensureIndex(['type' => 1, 'finished' => 1, 'aggressor.corporation_id' => 1, 'defender.corporation_id' => 1], []);
echo "Done\n";
echo "Creating index : 'type' => 1, 'ticker' => 1 ... ";
$information->ensureIndex(['type' => 1, 'ticker' => 1], ['sparse' => true]);
echo "Done\n";
echo "Creating index : 'type' => 1, 'lastApiUpdate' => 1 ... ";
$information->ensureIndex(['type' => 1, 'lastApiUpdate' => 1], []);
echo "Done\n";
echo "Creating index : 'type' => 1, 'id' => 1, 'version' => 1 ... ";
$information->ensureIndex(['type' => 1, 'id' => 1, 'version' => 1], ['unique' => true]);
echo "Done\n";
echo "Creating index : 'type' => 1, 'mutual' => 1, 'timeStarted' => -1 ... ";
$information->ensureIndex(['type' => 1, 'mutual' => 1, 'timeStarted' => -1], ['sparse' => true]);
echo "Done\n";
echo "Creating index : 'war_eligible' => 1 ... ";
$information->ensureIndex(['war_eligible' => 1], ['sparse' => true]);
echo "Done\n";
echo "Creating index : 'type' => 1, 'allianceID' => 1 ... ";
$information->ensureIndex(['type' => 1, 'allianceID' => 1], ['sparse' => true]);
echo "Done\n";
echo "Creating index : 'type' => 1, 'lastUpdated' => 1 ... ";
$information->ensureIndex(['type' => 1, 'lastUpdated' => 1], ['sparse' => true]);
echo "Done\n";
echo "Creating index : 'type' => 1, 'war_eligible' => 1, 'has_wars' => 1, 'memberCount' => -1 ... ";
$information->ensureIndex(['type' => 1, 'war_eligible' => 1, 'has_wars' => 1, 'memberCount' => -1], ['sparse' => true]);
echo "Done\n";
echo "Creating index : 'name' => 1 ... ";
$information->ensureIndex(['name' => 1], []);
echo "Done\n";
echo "Creating index : 'type' => 1, 'corporationID' => 1 ... ";
$information->ensureIndex(['type' => 1, 'corporationID' => 1], ['partialFilterExpression' => array (
  'type' => 'characterID',
)]);
echo "Done\n";
echo "Creating index : 'type' => 1, 'lastAffUpdate' => 1 ... ";
$information->ensureIndex(['type' => 1, 'lastAffUpdate' => 1], []);
echo "Done\n";
echo "Creating index : 'type' => 1, 'disqualified' => 1 ... ";
$information->ensureIndex(['type' => 1, 'disqualified' => 1], []);
echo "Done\n";
echo "Creating index : 'disqualified' => 1 ... ";
$information->ensureIndex(['disqualified' => 1], ['sparse' => true]);
echo "Done\n";
echo "Creating index : 'dqremove' => 1 ... ";
$information->ensureIndex(['dqremove' => 1], ['sparse' => true]);
echo "Done\n";
echo "Creating index : 'l_name' => 1 ... ";
$information->ensureIndex(['l_name' => 1], ['sparse' => true]);
echo "Done\n";
echo "Creating index : 'type' => 1, 'l_name' => 1, 'name' => 1 ... ";
$information->ensureIndex(['type' => 1, 'l_name' => 1, 'name' => 1], ['sparse' => true]);
echo "Done\n";
echo "Creating index : 'ticker' => 1 ... ";
$information->ensureIndex(['ticker' => 1], ['sparse' => true]);
echo "Done\n";
echo "Creating index : 'type' => 1, 'l_name' => 1 ... ";
$information->ensureIndex(['type' => 1, 'l_name' => 1], []);
echo "Done\n";

// insurance
echo "\nCreating collection insurance ... ";
$db->createCollection("insurance");
$collection = "insurance";
$insurance = $db->$collection;
echo "Done\n";
echo "Creating index : 'typeID' => 1, 'date' => 1 ... ";
$insurance->ensureIndex(['typeID' => 1, 'date' => 1], ['unique' => true]);
echo "Done\n";

// itemmails
echo "\nCreating collection itemmails ... ";
$db->createCollection("itemmails");
$collection = "itemmails";
$itemmails = $db->$collection;
echo "Done\n";
echo "Creating index : 'typeID' => 1 ... ";
$itemmails->ensureIndex(['typeID' => 1], []);
echo "Done\n";
echo "Creating index : 'killID' => -1 ... ";
$itemmails->ensureIndex(['killID' => -1], []);
echo "Done\n";
echo "Creating index : 'typeID' => 1, 'killID' => -1 ... ";
$itemmails->ensureIndex(['typeID' => 1, 'killID' => -1], ['unique' => true]);
echo "Done\n";

// keyvalues
echo "\nCreating collection keyvalues ... ";
$db->createCollection("keyvalues");
$collection = "keyvalues";
$keyvalues = $db->$collection;
echo "Done\n";
echo "Creating index : 'expiresAt' => 1 ... ";
$keyvalues->ensureIndex(['expiresAt' => 1], []);
echo "Done\n";
echo "Creating index : 'key' => 1 ... ";
$keyvalues->ensureIndex(['key' => 1], ['unique' => true]);
echo "Done\n";
echo "Creating index : 'key' => 1, 'expiresAt' => 1 ... ";
$keyvalues->ensureIndex(['key' => 1, 'expiresAt' => 1], []);
echo "Done\n";

// killmails
echo "\nCreating collection killmails ... ";
$db->createCollection("killmails");
$collection = "killmails";
$killmails = $db->$collection;
echo "Done\n";
echo "Creating index : 'involved.groupID' => 1, 'involved.isVictim' => 1, 'killID' => 1 ... ";
$killmails->ensureIndex(['involved.groupID' => 1, 'involved.isVictim' => 1, 'killID' => 1], ['sparse' => true]);
echo "Done\n";
echo "Creating index : 'solo' => 1 ... ";
$killmails->ensureIndex(['solo' => 1], []);
echo "Done\n";
echo "Creating index : 'system.regionID' => 1, 'killID' => 1 ... ";
$killmails->ensureIndex(['system.regionID' => 1, 'killID' => 1], []);
echo "Done\n";
echo "Creating index : 'involved.groupID' => 1, 'npc' => 1, 'sequence' => 1, 'involved.isVictim' => 1 ... ";
$killmails->ensureIndex(['involved.groupID' => 1, 'npc' => 1, 'sequence' => 1, 'involved.isVictim' => 1], ['sparse' => true]);
echo "Done\n";
echo "Creating index : 'zkb.hash' => 1 ... ";
$killmails->ensureIndex(['zkb.hash' => 1], []);
echo "Done\n";
echo "Creating index : 'zkb.totalValue' => 1 ... ";
$killmails->ensureIndex(['zkb.totalValue' => 1], []);
echo "Done\n";
echo "Creating index : 'locationID' => 1 ... ";
$killmails->ensureIndex(['locationID' => 1], ['sparse' => true]);
echo "Done\n";
echo "Creating index : 'ganked' => 1 ... ";
$killmails->ensureIndex(['ganked' => 1], ['sparse' => true]);
echo "Done\n";
echo "Creating index : 'system.security' => 1, 'killID' => 1 ... ";
$killmails->ensureIndex(['system.security' => 1, 'killID' => 1], []);
echo "Done\n";
echo "Creating index : 'involved.factionID' => 1, 'involved.isVictim' => 1, 'killID' => 1 ... ";
$killmails->ensureIndex(['involved.factionID' => 1, 'involved.isVictim' => 1, 'killID' => 1], ['sparse' => true]);
echo "Done\n";
echo "Creating index : 'involved.shipTypeID' => 1, 'involved.groupID' => 1, 'killID' => -1 ... ";
$killmails->ensureIndex(['involved.shipTypeID' => 1, 'involved.groupID' => 1, 'killID' => -1], []);
echo "Done\n";
echo "Creating index : 'system.constellationID' => 1 ... ";
$killmails->ensureIndex(['system.constellationID' => 1], []);
echo "Done\n";
echo "Creating index : 'involved.shipTypeID' => 1, 'npc' => 1, 'sequence' => 1, 'involved.isVictim' => 1 ... ";
$killmails->ensureIndex(['involved.shipTypeID' => 1, 'npc' => 1, 'sequence' => 1, 'involved.isVictim' => 1], ['sparse' => true]);
echo "Done\n";
echo "Creating index : 'involved.corporationID' => 1, 'npc' => 1, 'sequence' => 1, 'involved.isVictim' => 1 ... ";
$killmails->ensureIndex(['involved.corporationID' => 1, 'npc' => 1, 'sequence' => 1, 'involved.isVictim' => 1], []);
echo "Done\n";
echo "Creating index : 'system.solarSystemID' => 1, 'sequence' => 1 ... ";
$killmails->ensureIndex(['system.solarSystemID' => 1, 'sequence' => 1], []);
echo "Done\n";
echo "Creating index : 'system.constellationID' => 1, 'sequence' => 1 ... ";
$killmails->ensureIndex(['system.constellationID' => 1, 'sequence' => 1], []);
echo "Done\n";
echo "Creating index : 'zkb.fittedValue' => -1 ... ";
$killmails->ensureIndex(['zkb.fittedValue' => -1], []);
echo "Done\n";
echo "Creating index : 'involved.factionID' => 1, 'killID' => 1 ... ";
$killmails->ensureIndex(['involved.factionID' => 1, 'killID' => 1], []);
echo "Done\n";
echo "Creating index : 'involved.factionID' => 1, 'npc' => 1, 'sequence' => 1, 'involved.isVictim' => 1 ... ";
$killmails->ensureIndex(['involved.factionID' => 1, 'npc' => 1, 'sequence' => 1, 'involved.isVictim' => 1], ['sparse' => true]);
echo "Done\n";
echo "Creating index : 'labels' => 1, 'killID' => -1 ... ";
$killmails->ensureIndex(['labels' => 1, 'killID' => -1], []);
echo "Done\n";
echo "Creating index : 'involved.allianceID' => 1, 'npc' => 1, 'sequence' => 1, 'involved.isVictim' => 1 ... ";
$killmails->ensureIndex(['involved.allianceID' => 1, 'npc' => 1, 'sequence' => 1, 'involved.isVictim' => 1], ['sparse' => true]);
echo "Done\n";
echo "Creating index : 'campaigns' => 1 ... ";
$killmails->ensureIndex(['campaigns' => 1], ['sparse' => true]);
echo "Done\n";
echo "Creating index : 'warID' => 1 ... ";
$killmails->ensureIndex(['warID' => 1], ['sparse' => true]);
echo "Done\n";
echo "Creating index : 'dttm' => 1, 'killID' => 1 ... ";
$killmails->ensureIndex(['dttm' => 1, 'killID' => 1], []);
echo "Done\n";
echo "Creating index : 'npc' => 1 ... ";
$killmails->ensureIndex(['npc' => 1], []);
echo "Done\n";
echo "Creating index : 'awox' => 1 ... ";
$killmails->ensureIndex(['awox' => 1], []);
echo "Done\n";
echo "Creating index : 'system.solarSystemID' => 1, 'killID' => 1 ... ";
$killmails->ensureIndex(['system.solarSystemID' => 1, 'killID' => 1], []);
echo "Done\n";
echo "Creating index : 'killID' => 1 ... ";
$killmails->ensureIndex(['killID' => 1], ['unique' => true]);
echo "Done\n";
echo "Creating index : 'involved.allianceID' => 1, 'killID' => 1 ... ";
$killmails->ensureIndex(['involved.allianceID' => 1, 'killID' => 1], []);
echo "Done\n";
echo "Creating index : 'system.regionID' => 1, 'sequence' => 1 ... ";
$killmails->ensureIndex(['system.regionID' => 1, 'sequence' => 1], []);
echo "Done\n";
echo "Creating index : 'involved.corporationID' => 1, 'killID' => 1 ... ";
$killmails->ensureIndex(['involved.corporationID' => 1, 'killID' => 1], []);
echo "Done\n";
echo "Creating index : 'sponsored' => 1 ... ";
$killmails->ensureIndex(['sponsored' => 1], ['sparse' => true]);
echo "Done\n";
echo "Creating index : 'involved.characterID' => 1, 'npc' => 1, 'sequence' => 1, 'involved.isVictim' => 1 ... ";
$killmails->ensureIndex(['involved.characterID' => 1, 'npc' => 1, 'sequence' => 1, 'involved.isVictim' => 1], []);
echo "Done\n";
echo "Creating index : 'dttm' => 1, 'killID' => -1 ... ";
$killmails->ensureIndex(['dttm' => 1, 'killID' => -1], []);
echo "Done\n";
echo "Creating index : 'involved.characterID' => 1, 'killID' => 1 ... ";
$killmails->ensureIndex(['involved.characterID' => 1, 'killID' => 1], []);
echo "Done\n";
echo "Creating index : 'involved.shipTypeID' => 1, 'killID' => 1 ... ";
$killmails->ensureIndex(['involved.shipTypeID' => 1, 'killID' => 1], []);
echo "Done\n";
echo "Creating index : 'sequence' => 1 ... ";
$killmails->ensureIndex(['sequence' => 1], []);
echo "Done\n";
echo "Creating index : 'involved.groupID' => 1, 'killID' => 1 ... ";
$killmails->ensureIndex(['involved.groupID' => 1, 'killID' => 1], []);
echo "Done\n";
echo "Creating index : 'labels' => 1 ... ";
$killmails->ensureIndex(['labels' => 1], []);
echo "Done\n";
echo "Creating index : 'zkb.points' => 1 ... ";
$killmails->ensureIndex(['zkb.points' => 1], []);
echo "Done\n";
echo "Creating index : 'vGroupID' => 1, 'killID' => 1 ... ";
$killmails->ensureIndex(['vGroupID' => 1, 'killID' => 1], []);
echo "Done\n";
echo "Creating index : 'padhash' => 1 ... ";
$killmails->ensureIndex(['padhash' => 1], []);
echo "Done\n";
echo "Creating index : 'reset' => 1 ... ";
$killmails->ensureIndex(['reset' => 1], ['sparse' => true]);
echo "Done\n";
echo "Creating index : 'locationID' => 1, 'sequence' => 1 ... ";
$killmails->ensureIndex(['locationID' => 1, 'sequence' => 1], ['sparse' => true]);
echo "Done\n";
echo "Creating index : 'system.constellationID' => 1, 'killID' => -1 ... ";
$killmails->ensureIndex(['system.constellationID' => 1, 'killID' => -1], []);
echo "Done\n";
echo "Creating index : 'labels' => 1, 'sequence' => 1 ... ";
$killmails->ensureIndex(['labels' => 1, 'sequence' => 1], []);
echo "Done\n";

// locations
echo "\nCreating collection locations ... ";
$db->createCollection("locations");
$collection = "locations";
$locations = $db->$collection;
echo "Done\n";
echo "Creating index : 'id' => 1 ... ";
$locations->ensureIndex(['id' => 1], []);
echo "Done\n";

// markethistory
echo "\nCreating collection markethistory ... ";
$db->createCollection("markethistory");
$collection = "markethistory";
$markethistory = $db->$collection;
echo "Done\n";
echo "Creating index : 'type_id' => 1, 'region_id' => 1, 'date' => 1 ... ";
$markethistory->ensureIndex(['type_id' => 1, 'region_id' => 1, 'date' => 1], ['unique' => true]);
echo "Done\n";

// ninetyDays
echo "\nCreating collection ninetyDays ... ";
$db->createCollection("ninetyDays");
$collection = "ninetyDays";
$ninetyDays = $db->$collection;
echo "Done\n";
echo "Creating index : 'involved.allianceID' => 1, 'involved.isVictim' => 1, 'involved.groupID' => 1 ... ";
$ninetyDays->ensureIndex(['involved.allianceID' => 1, 'involved.isVictim' => 1, 'involved.groupID' => 1], []);
echo "Done\n";
echo "Creating index : 'zkb.totalValue' => 1 ... ";
$ninetyDays->ensureIndex(['zkb.totalValue' => 1], []);
echo "Done\n";
echo "Creating index : 'locationID' => 1 ... ";
$ninetyDays->ensureIndex(['locationID' => 1], ['sparse' => true]);
echo "Done\n";
echo "Creating index : 'involved.groupID' => 1, 'npc' => 1, 'sequence' => 1, 'involved.isVictim' => 1 ... ";
$ninetyDays->ensureIndex(['involved.groupID' => 1, 'npc' => 1, 'sequence' => 1, 'involved.isVictim' => 1], ['sparse' => true]);
echo "Done\n";
echo "Creating index : 'dttm' => 1, 'killID' => -1 ... ";
$ninetyDays->ensureIndex(['dttm' => 1, 'killID' => -1], []);
echo "Done\n";
echo "Creating index : 'structure' => 1 ... ";
$ninetyDays->ensureIndex(['structure' => 1], []);
echo "Done\n";
echo "Creating index : 'killID' => 1 ... ";
$ninetyDays->ensureIndex(['killID' => 1], ['unique' => true]);
echo "Done\n";
echo "Creating index : 'dttm' => 1, 'killID' => 1 ... ";
$ninetyDays->ensureIndex(['dttm' => 1, 'killID' => 1], []);
echo "Done\n";
echo "Creating index : 'involved.characterID' => 1, 'killID' => 1 ... ";
$ninetyDays->ensureIndex(['involved.characterID' => 1, 'killID' => 1], []);
echo "Done\n";
echo "Creating index : 'involved.allianceID' => 1, 'npc' => 1, 'sequence' => 1, 'involved.isVictim' => 1 ... ";
$ninetyDays->ensureIndex(['involved.allianceID' => 1, 'npc' => 1, 'sequence' => 1, 'involved.isVictim' => 1], ['sparse' => true]);
echo "Done\n";
echo "Creating index : 'involved.corporationID' => 1, 'sequence' => 1, 'involved.isVictim' => 1 ... ";
$ninetyDays->ensureIndex(['involved.corporationID' => 1, 'sequence' => 1, 'involved.isVictim' => 1], []);
echo "Done\n";
echo "Creating index : 'system.regionID' => 1, 'killID' => 1 ... ";
$ninetyDays->ensureIndex(['system.regionID' => 1, 'killID' => 1], []);
echo "Done\n";
echo "Creating index : 'involved.groupID' => 1, 'involved.isVictim' => 1, 'killID' => 1 ... ";
$ninetyDays->ensureIndex(['involved.groupID' => 1, 'involved.isVictim' => 1, 'killID' => 1], ['sparse' => true]);
echo "Done\n";
echo "Creating index : 'zkb.points' => 1 ... ";
$ninetyDays->ensureIndex(['zkb.points' => 1], []);
echo "Done\n";
echo "Creating index : 'involved.allianceID' => 1, 'killID' => 1 ... ";
$ninetyDays->ensureIndex(['involved.allianceID' => 1, 'killID' => 1], []);
echo "Done\n";
echo "Creating index : 'involved.characterID' => 1, 'npc' => 1, 'sequence' => 1, 'involved.isVictim' => 1 ... ";
$ninetyDays->ensureIndex(['involved.characterID' => 1, 'npc' => 1, 'sequence' => 1, 'involved.isVictim' => 1], []);
echo "Done\n";
echo "Creating index : 'padhash' => 1 ... ";
$ninetyDays->ensureIndex(['padhash' => 1], []);
echo "Done\n";
echo "Creating index : 'involved.corporationID' => 1, 'killID' => 1 ... ";
$ninetyDays->ensureIndex(['involved.corporationID' => 1, 'killID' => 1], []);
echo "Done\n";
echo "Creating index : 'involved.factionID' => 1, 'involved.isVictim' => 1, 'killID' => 1 ... ";
$ninetyDays->ensureIndex(['involved.factionID' => 1, 'involved.isVictim' => 1, 'killID' => 1], ['sparse' => true]);
echo "Done\n";
echo "Creating index : 'system.security' => 1, 'killID' => 1 ... ";
$ninetyDays->ensureIndex(['system.security' => 1, 'killID' => 1], []);
echo "Done\n";
echo "Creating index : 'involved.factionID' => 1, 'npc' => 1, 'sequence' => 1, 'involved.isVictim' => 1 ... ";
$ninetyDays->ensureIndex(['involved.factionID' => 1, 'npc' => 1, 'sequence' => 1, 'involved.isVictim' => 1], ['sparse' => true]);
echo "Done\n";
echo "Creating index : 'zkb.fittedValue' => -1 ... ";
$ninetyDays->ensureIndex(['zkb.fittedValue' => -1], []);
echo "Done\n";
echo "Creating index : 'ganked' => 1 ... ";
$ninetyDays->ensureIndex(['ganked' => 1], ['sparse' => true]);
echo "Done\n";
echo "Creating index : 'attackerCount' => 1, 'killID' => 1 ... ";
$ninetyDays->ensureIndex(['attackerCount' => 1, 'killID' => 1], []);
echo "Done\n";
echo "Creating index : 'involved.shipTypeID' => 1, 'killID' => 1 ... ";
$ninetyDays->ensureIndex(['involved.shipTypeID' => 1, 'killID' => 1], []);
echo "Done\n";
echo "Creating index : 'involved.groupID' => 1, 'killID' => 1 ... ";
$ninetyDays->ensureIndex(['involved.groupID' => 1, 'killID' => 1], []);
echo "Done\n";
echo "Creating index : 'sequence' => 1 ... ";
$ninetyDays->ensureIndex(['sequence' => 1], []);
echo "Done\n";
echo "Creating index : 'awox' => 1 ... ";
$ninetyDays->ensureIndex(['awox' => 1], []);
echo "Done\n";
echo "Creating index : 'involved.allianceID' => 1, 'involved.groupID' => 1, 'involved.isVictim' => 1 ... ";
$ninetyDays->ensureIndex(['involved.allianceID' => 1, 'involved.groupID' => 1, 'involved.isVictim' => 1], ['sparse' => true]);
echo "Done\n";
echo "Creating index : 'involved.corporationID' => 1, 'npc' => 1, 'sequence' => 1, 'involved.isVictim' => 1 ... ";
$ninetyDays->ensureIndex(['involved.corporationID' => 1, 'npc' => 1, 'sequence' => 1, 'involved.isVictim' => 1], []);
echo "Done\n";
echo "Creating index : 'involved.shipTypeID' => 1, 'npc' => 1, 'sequence' => 1, 'involved.isVictim' => 1 ... ";
$ninetyDays->ensureIndex(['involved.shipTypeID' => 1, 'npc' => 1, 'sequence' => 1, 'involved.isVictim' => 1], ['sparse' => true]);
echo "Done\n";
echo "Creating index : 'labels' => 1 ... ";
$ninetyDays->ensureIndex(['labels' => 1], []);
echo "Done\n";
echo "Creating index : 'system.solarSystemID' => 1, 'killID' => 1 ... ";
$ninetyDays->ensureIndex(['system.solarSystemID' => 1, 'killID' => 1], []);
echo "Done\n";
echo "Creating index : 'involved.factionID' => 1, 'killID' => 1 ... ";
$ninetyDays->ensureIndex(['involved.factionID' => 1, 'killID' => 1], []);
echo "Done\n";
echo "Creating index : 'warID' => 1 ... ";
$ninetyDays->ensureIndex(['warID' => 1], ['sparse' => true]);
echo "Done\n";
echo "Creating index : 'solo' => 1 ... ";
$ninetyDays->ensureIndex(['solo' => 1], []);
echo "Done\n";
echo "Creating index : 'involved.shipTypeID' => 1, 'involved.groupID' => 1, 'killID' => -1 ... ";
$ninetyDays->ensureIndex(['involved.shipTypeID' => 1, 'involved.groupID' => 1, 'killID' => -1], []);
echo "Done\n";
echo "Creating index : 'vGroupID' => 1, 'killID' => 1 ... ";
$ninetyDays->ensureIndex(['vGroupID' => 1, 'killID' => 1], []);
echo "Done\n";
echo "Creating index : 'system.constellationID' => 1 ... ";
$ninetyDays->ensureIndex(['system.constellationID' => 1], []);
echo "Done\n";
echo "Creating index : 'npc' => 1 ... ";
$ninetyDays->ensureIndex(['npc' => 1], []);
echo "Done\n";
echo "Creating index : 'dttm' => 1 ... ";
$ninetyDays->ensureIndex(['dttm' => 1], ['expireAfterSeconds' => 7776000]);
echo "Done\n";
echo "Creating index : 'labels' => 1, 'killID' => -1 ... ";
$ninetyDays->ensureIndex(['labels' => 1, 'killID' => -1], []);
echo "Done\n";

// oneWeek
echo "\nCreating collection oneWeek ... ";
$db->createCollection("oneWeek");
$collection = "oneWeek";
$oneWeek = $db->$collection;
echo "Done\n";
echo "Creating index : 'system.security' => 1, 'killID' => 1 ... ";
$oneWeek->ensureIndex(['system.security' => 1, 'killID' => 1], []);
echo "Done\n";
echo "Creating index : 'involved.allianceID' => 1, 'involved.characterID' => 1 ... ";
$oneWeek->ensureIndex(['involved.allianceID' => 1, 'involved.characterID' => 1], []);
echo "Done\n";
echo "Creating index : 'system.regionID' => 1, 'involved.groupID' => 1 ... ";
$oneWeek->ensureIndex(['system.regionID' => 1, 'involved.groupID' => 1], []);
echo "Done\n";
echo "Creating index : 'involved.characterID' => 1, 'involved.corporationID' => 1 ... ";
$oneWeek->ensureIndex(['involved.characterID' => 1, 'involved.corporationID' => 1], []);
echo "Done\n";
echo "Creating index : 'involved.corporationID' => 1, 'killID' => 1 ... ";
$oneWeek->ensureIndex(['involved.corporationID' => 1, 'killID' => 1], []);
echo "Done\n";
echo "Creating index : 'categoryID' => 1 ... ";
$oneWeek->ensureIndex(['categoryID' => 1], []);
echo "Done\n";
echo "Creating index : 'system.solarSystemID' => 1, 'involved.corporationID' => 1 ... ";
$oneWeek->ensureIndex(['system.solarSystemID' => 1, 'involved.corporationID' => 1], []);
echo "Done\n";
echo "Creating index : 'npc' => 1, 'categoryID' => 1, 'involved.allianceID' => 1, 'zkb.totalValue' => 1 ... ";
$oneWeek->ensureIndex(['npc' => 1, 'categoryID' => 1, 'involved.allianceID' => 1, 'zkb.totalValue' => 1], []);
echo "Done\n";
echo "Creating index : 'killID' => 1 ... ";
$oneWeek->ensureIndex(['killID' => 1], ['unique' => true]);
echo "Done\n";
echo "Creating index : 'involved.shipTypeID' => 1, 'system.solarSystemID' => 1 ... ";
$oneWeek->ensureIndex(['involved.shipTypeID' => 1, 'system.solarSystemID' => 1], []);
echo "Done\n";
echo "Creating index : 'system.solarSystemID' => 1, 'involved.groupID' => 1 ... ";
$oneWeek->ensureIndex(['system.solarSystemID' => 1, 'involved.groupID' => 1], []);
echo "Done\n";
echo "Creating index : 'involved.shipTypeID' => 1, 'killID' => 1 ... ";
$oneWeek->ensureIndex(['involved.shipTypeID' => 1, 'killID' => 1], []);
echo "Done\n";
echo "Creating index : 'npc' => 1, 'categoryID' => 1, 'involved.corporationID' => 1, 'zkb.totalValue' => 1 ... ";
$oneWeek->ensureIndex(['npc' => 1, 'categoryID' => 1, 'involved.corporationID' => 1, 'zkb.totalValue' => 1], []);
echo "Done\n";
echo "Creating index : 'involved.corporationID' => 1, 'involved.shipTypeID' => 1 ... ";
$oneWeek->ensureIndex(['involved.corporationID' => 1, 'involved.shipTypeID' => 1], []);
echo "Done\n";
echo "Creating index : 'involved.corporationID' => 1, 'involved.groupID' => 1 ... ";
$oneWeek->ensureIndex(['involved.corporationID' => 1, 'involved.groupID' => 1], []);
echo "Done\n";
echo "Creating index : 'sequence' => 1 ... ";
$oneWeek->ensureIndex(['sequence' => 1], []);
echo "Done\n";
echo "Creating index : 'solo' => 1 ... ";
$oneWeek->ensureIndex(['solo' => 1], []);
echo "Done\n";
echo "Creating index : 'awox' => 1 ... ";
$oneWeek->ensureIndex(['awox' => 1], []);
echo "Done\n";
echo "Creating index : 'involved.shipTypeID' => 1, 'involved.allianceID' => 1 ... ";
$oneWeek->ensureIndex(['involved.shipTypeID' => 1, 'involved.allianceID' => 1], []);
echo "Done\n";
echo "Creating index : 'system.solarSystemID' => 1, 'involved.characterID' => 1 ... ";
$oneWeek->ensureIndex(['system.solarSystemID' => 1, 'involved.characterID' => 1], []);
echo "Done\n";
echo "Creating index : 'involved.factionID' => 1, 'killID' => 1 ... ";
$oneWeek->ensureIndex(['involved.factionID' => 1, 'killID' => 1], []);
echo "Done\n";
echo "Creating index : 'involved.factionID' => 1, 'involved.isVictim' => 1, 'killID' => 1 ... ";
$oneWeek->ensureIndex(['involved.factionID' => 1, 'involved.isVictim' => 1, 'killID' => 1], ['sparse' => true]);
echo "Done\n";
echo "Creating index : 'involved.allianceID' => 1, 'involved.groupID' => 1 ... ";
$oneWeek->ensureIndex(['involved.allianceID' => 1, 'involved.groupID' => 1], []);
echo "Done\n";
echo "Creating index : 'npc' => 1, 'categoryID' => 1, 'involved.shipTypeID' => 1, 'zkb.totalValue' => 1 ... ";
$oneWeek->ensureIndex(['npc' => 1, 'categoryID' => 1, 'involved.shipTypeID' => 1, 'zkb.totalValue' => 1], []);
echo "Done\n";
echo "Creating index : 'involved.groupID' => 1, 'killID' => 1 ... ";
$oneWeek->ensureIndex(['involved.groupID' => 1, 'killID' => 1], []);
echo "Done\n";
echo "Creating index : 'system.regionID' => 1, 'involved.allianceID' => 1 ... ";
$oneWeek->ensureIndex(['system.regionID' => 1, 'involved.allianceID' => 1], []);
echo "Done\n";
echo "Creating index : 'involved.factionID' => 1, 'involved.groupID' => 1 ... ";
$oneWeek->ensureIndex(['involved.factionID' => 1, 'involved.groupID' => 1], []);
echo "Done\n";
echo "Creating index : 'categoryID' => 1, 'npc' => 1 ... ";
$oneWeek->ensureIndex(['categoryID' => 1, 'npc' => 1], []);
echo "Done\n";
echo "Creating index : 'labels' => 1 ... ";
$oneWeek->ensureIndex(['labels' => 1], []);
echo "Done\n";
echo "Creating index : 'system.regionID' => 1, 'system.solarSystemID' => 1 ... ";
$oneWeek->ensureIndex(['system.regionID' => 1, 'system.solarSystemID' => 1], []);
echo "Done\n";
echo "Creating index : 'system.regionID' => 1, 'involved.characterID' => 1 ... ";
$oneWeek->ensureIndex(['system.regionID' => 1, 'involved.characterID' => 1], []);
echo "Done\n";
echo "Creating index : 'system.regionID' => 1, 'involved.factionID' => 1 ... ";
$oneWeek->ensureIndex(['system.regionID' => 1, 'involved.factionID' => 1], []);
echo "Done\n";
echo "Creating index : 'involved.shipTypeID' => 1, 'involved.groupID' => 1 ... ";
$oneWeek->ensureIndex(['involved.shipTypeID' => 1, 'involved.groupID' => 1], []);
echo "Done\n";
echo "Creating index : 'involved.groupID' => 1, 'involved.isVictim' => 1, 'killID' => 1 ... ";
$oneWeek->ensureIndex(['involved.groupID' => 1, 'involved.isVictim' => 1, 'killID' => 1], ['sparse' => true]);
echo "Done\n";
echo "Creating index : 'dttm' => 1 ... ";
$oneWeek->ensureIndex(['dttm' => 1], ['expireAfterSeconds' => 604800]);
echo "Done\n";
echo "Creating index : 'system.regionID' => 1, 'involved.corporationID' => 1 ... ";
$oneWeek->ensureIndex(['system.regionID' => 1, 'involved.corporationID' => 1], []);
echo "Done\n";
echo "Creating index : 'system.regionID' => 1, 'involved.shipTypeID' => 1 ... ";
$oneWeek->ensureIndex(['system.regionID' => 1, 'involved.shipTypeID' => 1], []);
echo "Done\n";
echo "Creating index : 'vGroupID' => 1, 'killID' => 1 ... ";
$oneWeek->ensureIndex(['vGroupID' => 1, 'killID' => 1], []);
echo "Done\n";
echo "Creating index : 'system.solarSystemID' => 1, 'killID' => 1 ... ";
$oneWeek->ensureIndex(['system.solarSystemID' => 1, 'killID' => 1], []);
echo "Done\n";
echo "Creating index : 'involved.factionID' => 1, 'involved.shipTypeID' => 1 ... ";
$oneWeek->ensureIndex(['involved.factionID' => 1, 'involved.shipTypeID' => 1], []);
echo "Done\n";
echo "Creating index : 'involved.corporationID' => 1, 'involved.allianceID' => 1 ... ";
$oneWeek->ensureIndex(['involved.corporationID' => 1, 'involved.allianceID' => 1], []);
echo "Done\n";
echo "Creating index : 'warID' => 1 ... ";
$oneWeek->ensureIndex(['warID' => 1], ['sparse' => true]);
echo "Done\n";
echo "Creating index : 'zkb.totalValue' => 1 ... ";
$oneWeek->ensureIndex(['zkb.totalValue' => 1], []);
echo "Done\n";
echo "Creating index : 'involved.corporationID' => 1, 'involved.characterID' => 1 ... ";
$oneWeek->ensureIndex(['involved.corporationID' => 1, 'involved.characterID' => 1], []);
echo "Done\n";
echo "Creating index : 'involved.shipTypeID' => 1, 'involved.corporationID' => 1 ... ";
$oneWeek->ensureIndex(['involved.shipTypeID' => 1, 'involved.corporationID' => 1], []);
echo "Done\n";
echo "Creating index : 'involved.shipTypeID' => 1, 'involved.characterID' => 1 ... ";
$oneWeek->ensureIndex(['involved.shipTypeID' => 1, 'involved.characterID' => 1], []);
echo "Done\n";
echo "Creating index : 'system.regionID' => 1, 'killID' => 1 ... ";
$oneWeek->ensureIndex(['system.regionID' => 1, 'killID' => 1], []);
echo "Done\n";
echo "Creating index : 'involved.allianceID' => 1, 'involved.shipTypeID' => 1 ... ";
$oneWeek->ensureIndex(['involved.allianceID' => 1, 'involved.shipTypeID' => 1], []);
echo "Done\n";
echo "Creating index : 'involved.corporationID' => 1, 'involved.factionID' => 1 ... ";
$oneWeek->ensureIndex(['involved.corporationID' => 1, 'involved.factionID' => 1], []);
echo "Done\n";
echo "Creating index : 'involved.characterID' => 1, 'killID' => 1 ... ";
$oneWeek->ensureIndex(['involved.characterID' => 1, 'killID' => 1], []);
echo "Done\n";
echo "Creating index : 'involved.characterID' => 1, 'involved.factionID' => 1 ... ";
$oneWeek->ensureIndex(['involved.characterID' => 1, 'involved.factionID' => 1], []);
echo "Done\n";
echo "Creating index : 'involved.characterID' => 1, 'involved.groupID' => 1 ... ";
$oneWeek->ensureIndex(['involved.characterID' => 1, 'involved.groupID' => 1], []);
echo "Done\n";
echo "Creating index : 'dttm' => 1, 'killID' => 1 ... ";
$oneWeek->ensureIndex(['dttm' => 1, 'killID' => 1], []);
echo "Done\n";
echo "Creating index : 'system.solarSystemID' => 1, 'involved.allianceID' => 1 ... ";
$oneWeek->ensureIndex(['system.solarSystemID' => 1, 'involved.allianceID' => 1], []);
echo "Done\n";
echo "Creating index : 'system.solarSystemID' => 1, 'involved.factionID' => 1 ... ";
$oneWeek->ensureIndex(['system.solarSystemID' => 1, 'involved.factionID' => 1], []);
echo "Done\n";
echo "Creating index : 'involved.characterID' => 1, 'involved.allianceID' => 1 ... ";
$oneWeek->ensureIndex(['involved.characterID' => 1, 'involved.allianceID' => 1], []);
echo "Done\n";
echo "Creating index : 'npc' => 1, 'categoryID' => 1, 'zkb.totalValue' => 1 ... ";
$oneWeek->ensureIndex(['npc' => 1, 'categoryID' => 1, 'zkb.totalValue' => 1], []);
echo "Done\n";
echo "Creating index : 'npc' => 1, 'categoryID' => 1, 'involved.characterID' => 1, 'zkb.totalValue' => 1 ... ";
$oneWeek->ensureIndex(['npc' => 1, 'categoryID' => 1, 'involved.characterID' => 1, 'zkb.totalValue' => 1], []);
echo "Done\n";
echo "Creating index : 'involved.allianceID' => 1, 'killID' => 1 ... ";
$oneWeek->ensureIndex(['involved.allianceID' => 1, 'killID' => 1], []);
echo "Done\n";
echo "Creating index : 'system.solarSystemID' => 1, 'involved.shipTypeID' => 1 ... ";
$oneWeek->ensureIndex(['system.solarSystemID' => 1, 'involved.shipTypeID' => 1], []);
echo "Done\n";
echo "Creating index : 'involved.characterID' => 1, 'involved.shipTypeID' => 1 ... ";
$oneWeek->ensureIndex(['involved.characterID' => 1, 'involved.shipTypeID' => 1], []);
echo "Done\n";
echo "Creating index : 'involved.allianceID' => 1, 'involved.factionID' => 1 ... ";
$oneWeek->ensureIndex(['involved.allianceID' => 1, 'involved.factionID' => 1], []);
echo "Done\n";
echo "Creating index : 'locationID' => 1 ... ";
$oneWeek->ensureIndex(['locationID' => 1], []);
echo "Done\n";

// padhash
echo "\nCreating collection padhash ... ";
$db->createCollection("padhash");
$collection = "padhash";
$padhash = $db->$collection;
echo "Done\n";
echo "Creating index : 'characterID' => 1, 'isVictim' => 1, 'hash' => 1 ... ";
$padhash->ensureIndex(['characterID' => 1, 'isVictim' => 1, 'hash' => 1], ['unique' => true]);
echo "Done\n";
echo "Creating index : 'characterID' => 1, 'isVictim' => 1, 'count' => 1 ... ";
$padhash->ensureIndex(['characterID' => 1, 'isVictim' => 1, 'count' => 1], []);
echo "Done\n";

// patreon
echo "\nCreating collection patreon ... ";
$db->createCollection("patreon");
$collection = "patreon";
$patreon = $db->$collection;
echo "Done\n";
echo "Creating index : 'expires' => 1 ... ";
$patreon->ensureIndex(['expires' => 1], ['expireAfterSeconds' => 2678400]);
echo "Done\n";
echo "Creating index : 'patreon_id' => 1 ... ";
$patreon->ensureIndex(['patreon_id' => 1], ['unique' => true]);
echo "Done\n";
echo "Creating index : 'character_id' => 1 ... ";
$patreon->ensureIndex(['character_id' => 1], ['unique' => true]);
echo "Done\n";
echo "Creating index : 'character_id' => 1, 'expires' => 1 ... ";
$patreon->ensureIndex(['character_id' => 1, 'expires' => 1], []);
echo "Done\n";

// payments
echo "\nCreating collection payments ... ";
$db->createCollection("payments");
$collection = "payments";
$payments = $db->$collection;
echo "Done\n";
echo "Creating index : 'paymentApplied' => 1 ... ";
$payments->ensureIndex(['paymentApplied' => 1], []);
echo "Done\n";
echo "Creating index : 'refID' => 1 ... ";
$payments->ensureIndex(['refID' => 1], ['unique' => true]);
echo "Done\n";
echo "Creating index : 'player_donation' => 1, 'dttm' => 1 ... ";
$payments->ensureIndex(['player_donation' => 1, 'dttm' => 1], []);
echo "Done\n";
echo "Creating index : '_id' => 1, 'player_donation' => 1, 'dttm' => 1 ... ";
$payments->ensureIndex(['_id' => 1, 'player_donation' => 1, 'dttm' => 1], []);
echo "Done\n";
echo "Creating index : 'monocle_check' => 1 ... ";
$payments->ensureIndex(['monocle_check' => 1], []);
echo "Done\n";
echo "Creating index : 'characterID' => 1 ... ";
$payments->ensureIndex(['characterID' => 1], []);
echo "Done\n";

// prices
echo "\nCreating collection prices ... ";
$db->createCollection("prices");
$collection = "prices";
$prices = $db->$collection;
echo "Done\n";
echo "Creating index : 'typeID' => 1 ... ";
$prices->ensureIndex(['typeID' => 1], ['unique' => true]);
echo "Done\n";

// rewards
echo "\nCreating collection rewards ... ";
$db->createCollection("rewards");
$collection = "rewards";
$rewards = $db->$collection;
echo "Done\n";
echo "Creating index : 'character_id' => 1 ... ";
$rewards->ensureIndex(['character_id' => 1], ['unique' => true]);
echo "Done\n";
echo "Creating index : 'winner' => 1 ... ";
$rewards->ensureIndex(['winner' => 1], []);
echo "Done\n";

// scopes
echo "\nCreating collection scopes ... ";
$db->createCollection("scopes");
$collection = "scopes";
$scopes = $db->$collection;
echo "Done\n";
echo "Creating index : 'characterID' => 1 ... ";
$scopes->ensureIndex(['characterID' => 1], []);
echo "Done\n";
echo "Creating index : 'corporationID' => 1, 'scope' => 1 ... ";
$scopes->ensureIndex(['corporationID' => 1, 'scope' => 1], ['sparse' => true]);
echo "Done\n";
echo "Creating index : 'scope' => 1, 'lastApiUpdate' => 1 ... ";
$scopes->ensureIndex(['scope' => 1, 'lastApiUpdate' => 1], []);
echo "Done\n";
echo "Creating index : 'iterated' => 1 ... ";
$scopes->ensureIndex(['iterated' => 1], ['sparse' => true]);
echo "Done\n";
echo "Creating index : 'corporationID' => 1, 'scope' => 1, 'lastFetch' => 1 ... ";
$scopes->ensureIndex(['corporationID' => 1, 'scope' => 1, 'lastFetch' => 1], []);
echo "Done\n";
echo "Creating index : 'characterID' => 1, 'scope' => 1 ... ";
$scopes->ensureIndex(['characterID' => 1, 'scope' => 1], ['unique' => true]);
echo "Done\n";

// searches
echo "\nCreating collection searches ... ";
$db->createCollection("searches");
$collection = "searches";
$searches = $db->$collection;
echo "Done\n";

// sessions
echo "\nCreating collection sessions ... ";
$db->createCollection("sessions");
$collection = "sessions";
$sessions = $db->$collection;
echo "Done\n";
echo "Creating index : 'updatedAt' => 1 ... ";
$sessions->ensureIndex(['updatedAt' => 1], []);
echo "Done\n";

// shortener
echo "\nCreating collection shortener ... ";
$db->createCollection("shortener");
$collection = "shortener";
$shortener = $db->$collection;
echo "Done\n";
echo "Creating index : 'url' => 1 ... ";
$shortener->ensureIndex(['url' => 1], []);
echo "Done\n";

// sponsored
echo "\nCreating collection sponsored ... ";
$db->createCollection("sponsored");
$collection = "sponsored";
$sponsored = $db->$collection;
echo "Done\n";
echo "Creating index : 'victim.locationID' => 1 ... ";
$sponsored->ensureIndex(['victim.locationID' => 1], []);
echo "Done\n";
echo "Creating index : 'victim.allianceID' => 1 ... ";
$sponsored->ensureIndex(['victim.allianceID' => 1], []);
echo "Done\n";
echo "Creating index : 'victim.regionID' => 1 ... ";
$sponsored->ensureIndex(['victim.regionID' => 1], []);
echo "Done\n";
echo "Creating index : 'killID' => 1, 'isk' => 1 ... ";
$sponsored->ensureIndex(['killID' => 1, 'isk' => 1], []);
echo "Done\n";
echo "Creating index : 'victim.characterID' => 1 ... ";
$sponsored->ensureIndex(['victim.characterID' => 1], []);
echo "Done\n";
echo "Creating index : 'victim.corporationID' => 1 ... ";
$sponsored->ensureIndex(['victim.corporationID' => 1], []);
echo "Done\n";
echo "Creating index : 'victim.factionID' => 1 ... ";
$sponsored->ensureIndex(['victim.factionID' => 1], []);
echo "Done\n";
echo "Creating index : 'victim' => 1 ... ";
$sponsored->ensureIndex(['victim' => 1], []);
echo "Done\n";
echo "Creating index : 'entryTime' => 1 ... ";
$sponsored->ensureIndex(['entryTime' => 1], []);
echo "Done\n";
echo "Creating index : 'victim.groupID' => 1 ... ";
$sponsored->ensureIndex(['victim.groupID' => 1], []);
echo "Done\n";
echo "Creating index : 'victim.shipTypeID' => 1 ... ";
$sponsored->ensureIndex(['victim.shipTypeID' => 1], []);
echo "Done\n";
echo "Creating index : 'victim.solarSystemID' => 1 ... ";
$sponsored->ensureIndex(['victim.solarSystemID' => 1], []);
echo "Done\n";
echo "Creating index : 'killID' => 1 ... ";
$sponsored->ensureIndex(['killID' => 1], []);
echo "Done\n";
echo "Creating index : 'characterID' => 1 ... ";
$sponsored->ensureIndex(['characterID' => 1], []);
echo "Done\n";

// statistics
echo "\nCreating collection statistics ... ";
$db->createCollection("statistics");
$collection = "statistics";
$statistics = $db->$collection;
echo "Done\n";
echo "Creating index : 'type' => 1, 'pointsLostRank' => 1 ... ";
$statistics->ensureIndex(['type' => 1, 'pointsLostRank' => 1], []);
echo "Done\n";
echo "Creating index : 'type' => 1, 'recentShipsDestroyed' => 1 ... ";
$statistics->ensureIndex(['type' => 1, 'recentShipsDestroyed' => 1], ['sparse' => true]);
echo "Done\n";
echo "Creating index : 'type' => 1, 'recentIskLost' => 1 ... ";
$statistics->ensureIndex(['type' => 1, 'recentIskLost' => 1], ['sparse' => true]);
echo "Done\n";
echo "Creating index : 'type' => 1, 'recentPointsDestroyed' => 1 ... ";
$statistics->ensureIndex(['type' => 1, 'recentPointsDestroyed' => 1], ['sparse' => true]);
echo "Done\n";
echo "Creating index : 'shipsDestroyed' => 1 ... ";
$statistics->ensureIndex(['shipsDestroyed' => 1], []);
echo "Done\n";
echo "Creating index : 'calcAlltime' => 1 ... ";
$statistics->ensureIndex(['calcAlltime' => 1], ['sparse' => true]);
echo "Done\n";
echo "Creating index : 'reset' => 1 ... ";
$statistics->ensureIndex(['reset' => 1], []);
echo "Done\n";
echo "Creating index : 'id' => 1 ... ";
$statistics->ensureIndex(['id' => 1], []);
echo "Done\n";
echo "Creating index : 'type' => 1, 'pointsDestroyed' => 1 ... ";
$statistics->ensureIndex(['type' => 1, 'pointsDestroyed' => 1], []);
echo "Done\n";
echo "Creating index : 'type' => 1, 'overallScore' => 1 ... ";
$statistics->ensureIndex(['type' => 1, 'overallScore' => 1], ['sparse' => true]);
echo "Done\n";
echo "Creating index : 'type' => 1, 'iskLostRank' => 1 ... ";
$statistics->ensureIndex(['type' => 1, 'iskLostRank' => 1], []);
echo "Done\n";
echo "Creating index : 'type' => 1, 'recentPointsDestroyedRank' => 1 ... ";
$statistics->ensureIndex(['type' => 1, 'recentPointsDestroyedRank' => 1], ['sparse' => true]);
echo "Done\n";
echo "Creating index : 'type' => 1, 'recentPointsLost' => 1 ... ";
$statistics->ensureIndex(['type' => 1, 'recentPointsLost' => 1], ['sparse' => true]);
echo "Done\n";
echo "Creating index : 'type' => 1, 'recentOverallRank' => 1 ... ";
$statistics->ensureIndex(['type' => 1, 'recentOverallRank' => 1], ['sparse' => true]);
echo "Done\n";
echo "Creating index : 'type' => 1, 'id' => 1 ... ";
$statistics->ensureIndex(['type' => 1, 'id' => 1], ['unique' => true]);
echo "Done\n";
echo "Creating index : 'type' => 1, 'shipsDestroyedRank' => 1 ... ";
$statistics->ensureIndex(['type' => 1, 'shipsDestroyedRank' => 1], []);
echo "Done\n";
echo "Creating index : 'updatingSupers' => 1 ... ";
$statistics->ensureIndex(['updatingSupers' => 1], ['sparse' => true]);
echo "Done\n";
echo "Creating index : 'type' => 1, 'pointsLost' => 1 ... ";
$statistics->ensureIndex(['type' => 1, 'pointsLost' => 1], []);
echo "Done\n";
echo "Creating index : 'type' => 1, 'overallRank' => 1 ... ";
$statistics->ensureIndex(['type' => 1, 'overallRank' => 1], []);
echo "Done\n";
echo "Creating index : 'type' => 1, 'recentPointsLostRank' => 1 ... ";
$statistics->ensureIndex(['type' => 1, 'recentPointsLostRank' => 1], ['sparse' => true]);
echo "Done\n";
echo "Creating index : 'hasSupers' => 1 ... ";
$statistics->ensureIndex(['hasSupers' => 1], ['sparse' => true]);
echo "Done\n";
echo "Creating index : 'trophies.levels' => 1 ... ";
$statistics->ensureIndex(['trophies.levels' => 1], ['sparse' => true]);
echo "Done\n";
echo "Creating index : 'type' => 1, 'id' => 1, 'stats.type' => 1, 'stats.id' => 1 ... ";
$statistics->ensureIndex(['type' => 1, 'id' => 1, 'stats.type' => 1, 'stats.id' => 1], []);
echo "Done\n";
echo "Creating index : 'overallRank' => 1 ... ";
$statistics->ensureIndex(['overallRank' => 1], []);
echo "Done\n";
echo "Creating index : 'overallScore' => 1 ... ";
$statistics->ensureIndex(['overallScore' => 1], []);
echo "Done\n";
echo "Creating index : 'type' => 1, 'recentShipsLostRank' => 1 ... ";
$statistics->ensureIndex(['type' => 1, 'recentShipsLostRank' => 1], ['sparse' => true]);
echo "Done\n";
echo "Creating index : 'type' => 1, 'shipsDestroyed' => 1 ... ";
$statistics->ensureIndex(['type' => 1, 'shipsDestroyed' => 1], []);
echo "Done\n";
echo "Creating index : 'type' => 1, 'iskDestroyedRank' => 1 ... ";
$statistics->ensureIndex(['type' => 1, 'iskDestroyedRank' => 1], []);
echo "Done\n";
echo "Creating index : 'type' => 1, 'recentShipsLost' => 1 ... ";
$statistics->ensureIndex(['type' => 1, 'recentShipsLost' => 1], ['sparse' => true]);
echo "Done\n";
echo "Creating index : 'type' => 1, 'recentIskLostRank' => 1 ... ";
$statistics->ensureIndex(['type' => 1, 'recentIskLostRank' => 1], ['sparse' => true]);
echo "Done\n";
echo "Creating index : 'calcTrophies' => 1 ... ";
$statistics->ensureIndex(['calcTrophies' => 1], ['sparse' => true]);
echo "Done\n";
echo "Creating index : 'calcAlltime' => 1, 'shipsDestroyed' => 1 ... ";
$statistics->ensureIndex(['calcAlltime' => 1, 'shipsDestroyed' => 1], ['sparse' => true]);
echo "Done\n";
echo "Creating index : 'type' => 1, 'iskLost' => 1 ... ";
$statistics->ensureIndex(['type' => 1, 'iskLost' => 1], []);
echo "Done\n";
echo "Creating index : 'type' => 1, 'recentShipsDestroyedRank' => 1 ... ";
$statistics->ensureIndex(['type' => 1, 'recentShipsDestroyedRank' => 1], ['sparse' => true]);
echo "Done\n";
echo "Creating index : 'type' => 1, 'recentIskDestroyed' => 1 ... ";
$statistics->ensureIndex(['type' => 1, 'recentIskDestroyed' => 1], ['sparse' => true]);
echo "Done\n";
echo "Creating index : 'type' => 1, 'recentIskDestroyedRank' => 1 ... ";
$statistics->ensureIndex(['type' => 1, 'recentIskDestroyedRank' => 1], ['sparse' => true]);
echo "Done\n";
echo "Creating index : 'type' => 1, 'shipsLost' => 1 ... ";
$statistics->ensureIndex(['type' => 1, 'shipsLost' => 1], []);
echo "Done\n";
echo "Creating index : 'type' => 1, 'iskDestroyed' => 1 ... ";
$statistics->ensureIndex(['type' => 1, 'iskDestroyed' => 1], []);
echo "Done\n";
echo "Creating index : 'type' => 1, 'shipsLostRank' => 1 ... ";
$statistics->ensureIndex(['type' => 1, 'shipsLostRank' => 1], []);
echo "Done\n";
echo "Creating index : 'type' => 1, 'pointsDestroyedRank' => 1 ... ";
$statistics->ensureIndex(['type' => 1, 'pointsDestroyedRank' => 1], []);
echo "Done\n";
echo "Creating index : 'type' => 1, 'recentOverallScore' => 1 ... ";
$statistics->ensureIndex(['type' => 1, 'recentOverallScore' => 1], ['sparse' => true]);
echo "Done\n";
echo "Creating index : 'todo' => 1 ... ";
$statistics->ensureIndex(['todo' => 1], ['sparse' => true]);
echo "Done\n";
echo "Creating index : 'weeklyPrep' => 1 ... ";
$statistics->ensureIndex(['weeklyPrep' => 1], ['sparse' => true]);
echo "Done\n";

// statstest
echo "\nCreating collection statstest ... ";
$db->createCollection("statstest");
$collection = "statstest";
$statstest = $db->$collection;
echo "Done\n";
echo "Creating index : 'type' => 1, 'id' => 1 ... ";
$statstest->ensureIndex(['type' => 1, 'id' => 1], ['unique' => true]);
echo "Done\n";
echo "Creating index : 'touched' => 1 ... ";
$statstest->ensureIndex(['touched' => 1], ['sparse' => true]);
echo "Done\n";

// tickets
echo "\nCreating collection tickets ... ";
$db->createCollection("tickets");
$collection = "tickets";
$tickets = $db->$collection;
echo "Done\n";
echo "Creating index : 'characterID' => 1 ... ";
$tickets->ensureIndex(['characterID' => 1], []);
echo "Done\n";
echo "Creating index : 'dttm' => 1 ... ";
$tickets->ensureIndex(['dttm' => 1], []);
echo "Done\n";
echo "Creating index : 'dttm' => 1, 'characterID' => 1 ... ";
$tickets->ensureIndex(['dttm' => 1, 'characterID' => 1], []);
echo "Done\n";
echo "Creating index : 'parentID' => 1, 'dttm' => 1 ... ";
$tickets->ensureIndex(['parentID' => 1, 'dttm' => 1], []);
echo "Done\n";

// twitch
echo "\nCreating collection twitch ... ";
$db->createCollection("twitch");
$collection = "twitch";
$twitch = $db->$collection;
echo "Done\n";
echo "Creating index : 'character_id' => 1 ... ";
$twitch->ensureIndex(['character_id' => 1], ['unique' => true]);
echo "Done\n";
echo "Creating index : 'twitch_id' => 1 ... ";
$twitch->ensureIndex(['twitch_id' => 1], ['unique' => true]);
echo "Done\n";
echo "Creating index : 'character_id' => 1, 'twitch_id' => 1 ... ";
$twitch->ensureIndex(['character_id' => 1, 'twitch_id' => 1], ['unique' => true]);
echo "Done\n";
echo "Creating index : 'expires' => 1 ... ";
$twitch->ensureIndex(['expires' => 1], ['expireAfterSeconds' => 3600]);
echo "Done\n";

// users
echo "\nCreating collection users ... ";
$db->createCollection("users");
$collection = "users";
$users = $db->$collection;
echo "Done\n";
echo "Creating index : 'userID' => 1 ... ";
$users->ensureIndex(['userID' => 1], []);
echo "Done\n";
echo "Creating index : 'characterID' => 1 ... ";
$users->ensureIndex(['characterID' => 1], ['unique' => true]);
echo "Done\n";

// versions
echo "\nCreating collection versions ... ";
$db->createCollection("versions");
$collection = "versions";
$versions = $db->$collection;
echo "Done\n";
echo "Creating index : 'serverVersion' => 1 ... ";
$versions->ensureIndex(['serverVersion' => 1], ['unique' => true]);
echo "Done\n";
echo "Creating index : 'epoch' => 1 ... ";
$versions->ensureIndex(['epoch' => 1], []);
echo "Done\n";

// warmails
echo "\nCreating collection warmails ... ";
$db->createCollection("warmails");
$collection = "warmails";
$warmails = $db->$collection;
echo "Done\n";
echo "Creating index : 'warID' => 1 ... ";
$warmails->ensureIndex(['warID' => 1], []);
echo "Done\n";
echo "Creating index : 'warID' => 1, 'killID' => 1 ... ";
$warmails->ensureIndex(['warID' => 1, 'killID' => 1], ['unique' => true]);
echo "Done\n";

// zlog
echo "\nCreating collection zlog ... ";
$db->createCollection("zlog");
$collection = "zlog";
$zlog = $db->$collection;
echo "Done\n";
echo "Creating index : 'characterID' => 1, 'entryTime' => 1 ... ";
$zlog->ensureIndex(['characterID' => 1, 'entryTime' => 1], []);
echo "Done\n";
echo "Creating index : 'entryTime' => 1 ... ";
$zlog->ensureIndex(['entryTime' => 1], ['expireAfterSeconds' => 7776000]);
echo "Done\n";

